!function(){window.Trails=function(){function a(){var a;a=this,window.onhashchange=function(b){return a._handle(b.newURL)},window.onload=function(){return a._handle(window.location)}}return a.prototype.routes=[],a.prototype.route=function(a,b){var c,d,e,f;return e=a,c=Array.prototype.slice.call(arguments),a=c.shift(),f=a.match(/:([\w\d]+)/g)||[],f=f.map(function(a){return a.substring(1)}),a=new RegExp("^"+a.replace(/\./,"\\.").replace(/\*/g,"(.+)").replace(/:([\w\d]+)/g,"([^/?]+)")+"$"),d={path:a,originalPath:e,handler:b,paramNames:f},this.routes.push(d)},a.prototype.vomit=function(){return this.routes},a.prototype._handle=function(a){var b,c,d,e,f,g;return e=document.createElement("a"),e.href=a,d=e.hash.replace("#!",""),f=this._match(d),f||alert("404"),c={},g=f.path.exec(d),g&&(g.shift(),g.map(decodeURIComponent).forEach(function(a,b){return f.paramNames&&f.paramNames.length>b?c[f.paramNames[b]]=a:a?(c.splat=c.splat||[],c.splat.push(a)):void 0})),b={full:f.originalPath,params:c},f.handler(b)},a.prototype._match=function(a){var b,c,d,e,f;for(c={},f=this.routes,d=0,e=f.length;e>d;d++)b=f[d],a.match(b.path||decodeURIComponent(a).match(b.path))&&(c=b);return c},a}()}.call(this);